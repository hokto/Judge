-Judge-

#目的
部内での競プロを普及を目的とし、各自が得意とするアルゴリズム、考察力を使った自作問題をジャッジするためのシステム。

#フォルダ構成
TestCase(必須)
 -> 問題のテストケースがテキストデータで保存されてるフォルダ。
CorrectOutPut(必須)
 -> テストケースに対する正解用の出力がテキストデータで保存されてるフォルダ。なお、正解用の出力は、正解用のソースコードにテストケースを入力させ、その出力としている。(make_correct_output.pyを使用)
Allotment(必須)
 -> 問題のテストケースごとの配点(どこまで正解すれば何点もらえるか)がテキストデータで保存されてるフォルダ。
JudgeProgram
 -> 問題によっては、複数の解答方法が存在する場合があるため、入力値とジャッジ対象ソースからの出力を受け取り、それが正解であるかどうかをジャッジするプログラムを保存するフォルダ。
MakeTestCase
 -> 問題のテストケースを作成するプログラムを保存しているフォルダ。今のところ、それぞれの問題に対して、テストケースを出力するプログラムが１つ存在する。
answer_sources
 -> 各問題に対する解答用のソースコードが保存されているフォルダ。いつも、正解用の出力を作成するときに使用するソースコードを保存している。
sources
 -> 提出されたソースコードを保存するフォルダ。
*必須のものに関しては、ファイル名を同一のものにする。(例：max.txt,edpc1_test.txt)*

#ソースコードの役割
judge.py
 -> ジャッジをしたいソースコード、テストケースなどを入力することで、オンラインジャッジシステムのようなジャッジ結果を返すプログラム。このプログラムが、このシステムのメイン。
make_correct_output.py
 -> 正解用の出力を作成するためのプログラム。正解用のソースコードとテストケースを入力することで作成される。
file_accessor.py
 -> このシステムように作成した、ファイルを読み込む、もしくは書き込むための関数が含まれたプログラム。作成した理由としては、テストケース、正解用の出力では、同じようなフォーマットになっているため。

#フォイルのフォーマットについて
テストケース、正解用出力
 -> 各テストケース、正解用出力の分割を行うために、１つの入力、正解用出力ごとに分割文字を書き込むようにしている。今のところ、入力値および出力値に使用される可能性の低いと考えられる"/\n"を分割文字としている。また、複数の解答が存在する問題の場合のみ、"judgecommand()"と丸括弧内にその問題用に出力値をジャッジするプログラムを実行するコマンドを入力する。(例:judgecommand(python3 test.py))
配点が保存されたファイル
 -> 各行ごとに、それぞれ何点かを書き込むようにしている。ただし、最初の入力から、その行の入力まで正解であればその行に書かれた得点が加算される仕組みになっている。

#システムを使用する流れ
1)正解用のソースコードおよび、テストケース、テストケースごとの配点を保存するファイルを作成しておく。例として、answer.cppというソースコード(コンパイルしたものをanswer.outとする）と、sample.txtというテストケース、sample.txtという配点を保存したファイルを作成したとする。*テストケースは、TestCaseフォルダに、配点を保存するファイルは、Allotmentフォルダに保存する。*
2)make_correct_output.pyを実行する。
 2.1)正解用のソースコードを実行するコマンドを入力する。例の場合では、 ./answer.out と入力する。
 2.2)テストケース名を入力する。例の場合では、sample と入力する。*拡張子は入力しないこと*
 2.3)誤差が発生するテストケースの場合は、誤差が許容できる範囲として、10^nに当たる整数nを入力する。許容誤差を10^-5にしたい場合は、 -5 と入力する。*誤差が発生しない場合は、 0 と入力する。*

以上を行い、エラー等が発生しなければ*CorrectOutPutフォルダにテストケースと同じ名前で*正解用の出力がテキストデータで保存される。例の場合では、sample.txtと保存される。
3)judge.pyを実行する。
 3.1)ジャッジする問題の名前(テストケース名)を入力する。例の場合では、 sample と入力する。*ただし、拡張子は入力しないこと。*
 3.2)ジャッジしたいソースコードの相対パスを入力する。
 3.3)ジャッジする問題の配点を保存しているファイルの名前を入力する。例の場合では、 sample と入力する。*ただし、拡張子は入力しないこと。*
 3.4)C++などでは、コンパイル時にエラーが発生するとCEと表示され、エラーメッセージが表示され、プログラムが終了する。
 3.5)エラーなどがなければ、ジャッジ対象とされるソースコードが実行され、テストケース番号とそのテストケースに対するジャッジ結果が出力される。ジャッジ結果の種類を以下に示す。
 AC
  -> 入力に対する出力と正解用の出力を比較して、同じ(誤差が許容されるなら許容範囲内である)なら場合。
 WA
  -> 正解用の出力と違った場合。
 RE
  -> 実行時にエラーが発生した場合。
 TLE
  -> あらかじめ設定された実行制限時間内にタスクが終了しなかった場合。この場合は、タスクが強制終了される。また、*設定している時間は、2secである。*
 
 3.6)最後に、最終的なジャッジ結果が上にいずれかから出力され、プログラムが終了する。
